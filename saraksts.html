<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bootstrap 5 Todo List</title>
    <!-- Add Bootstrap 5 CSS link -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center">Todo List</h1>
        <div class="row">
            <div class="col-md-6 offset-md-3">
                <div class="input-group mb-3">
                    <input type="text" id="task" class="form-control" placeholder="Add a new task">
                    <button id="addTask" class="btn btn-primary">Add</button>
                </div>
                <ul class="list-group" id="taskList">
                    <!-- Saraksta elementi tiks dinamiski ievietoti šeit -->

                    <!-- Piemērs vienam ierakstam  -->
                    <!-- <li class="list-group-item">Nopirkt ballītei balonus</li> -->
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Izveidot darāmo lietu sarakstu
        // saraksta elementus var atzīmēt kā izpildītus
        // papilduzdevumi: 
        //      iespēja ievietot ierakstu sarakstā ar pogu "Enter"
        //      saglabāt sarakstu kā sīkdatni, izmantojot localStorage

        let teksts = document.getElementById("task");
        let poga = document.getElementById("addTask");
        let saraksts = document.getElementById("taskList");

        let dati = [];

        // elementu ievietošana no localStorage
        window.onload = function(){
            if (localStorage.getItem("dati") != null){
                dati = JSON.parse(localStorage.getItem('dati'));
            }

            for(let ieraksts of dati){
                let li = document.createElement("li");
                li.classList.add("list-group-item");
                li.innerText = ieraksts;
                li.onclick = function(){
                    li.classList.toggle("text-decoration-line-through");
                }
                saraksts.appendChild(li);
            }
        }

        function ievietotSarakstā(){
            if(teksts.value.trim() != ""){
                // konstruējam <li> elementu
                let li = document.createElement("li");
                li.classList.add("list-group-item");
                li.innerText = teksts.value;
                dati.push(teksts.value);
                teksts.value = ""; // iztukšojam ievades lauku

                li.onclick = function(){ // izsvītrošanas funkcionalitāte
                    li.classList.toggle("text-decoration-line-through");
                }
                saraksts.appendChild(li); // 
            }

            // localStorage informācijai jābūt teksta formātā, tāpēc izmantojam JSON.stringify
            localStorage.setItem("dati", JSON.stringify(dati));
        }
        poga.addEventListener("click", ievietotSarakstā );
        teksts.addEventListener("keypress", function(e){
            if(e.key == "Enter"){
                ievietotSarakstā();
            }
        });
        
        
    </script>
</body>
</html>